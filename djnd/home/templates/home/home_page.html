{% extends "wrapper.html" %}
{% load static wagtailcore_tags wagtailimages_tags i18n %}

{% block body_class %}template-homepage{% endblock %}

{% block content %}
<div>
  <div class="border-b border-dark last:border-b-0 bg-white">
    <div class="flex gap-10 max-w-screen-xl px-14 pt-20">
      <div class="basis-8/12">
        <h1 class="mb-6 last:mb-0 text-5xl font-semibold">{{ page.title }}</h1>
        {% if page.introduction %}
        <div class="rich-text">
          {{ page.introduction|richtext }}
        </div>
        {% endif %}
      </div>
      <div class="basis-4/12">
        <h2 class="mt-5 text-center font-semibold text-xl">{{ page.focus_areas_title }}</h2>
        <div class="my-6">
          {% for focus_area in page.focus_areas %}
          {% cycle 'one' 'two' 'three' 'four' as focus_cycle silent %}
          {% if focus_area.value.url or focus_area.value.page %}
          <a href="{% if focus_area.value.page %}{% pageurl focus_area.value.page %}{% else %}{{ focus_area.value.url }}{% endif %}">
          {% endif %}
          <div class="
            relative flex items-center gap-4 mt-4 px-8 py-11 shadow-dark shadow-[0px_0px_0px_1px] bg-{{ focus_area.value.color }} group
            {% if focus_cycle == 'one' %}
            -rotate-2 -translate-x-3
            {% elif focus_cycle == 'two' %}
            rotate-3 translate-x-3
            {% elif focus_cycle == 'three' %}
            rotate-[-0.5deg] -translate-x-3
            {% elif focus_cycle == 'four' %}
            rotate-[4deg] translate-x-3
            {% endif %}
            transition-all duration-150 hover:scale-105 hover:shadow-[0px_0px_0px_2px] hover:z-10
          ">
            <div class="w-14 shrink-0">
              {% image focus_area.value.image fill-112x112 class="aspect-square" %}
            </div>
            <div class="font-medium text-2xl leading-none">
              {{focus_area.value.name}}
            </div>
            <img class="w-5 ml-auto -mb-0.5 group-hover:animate-arrow-hover" src="{% static "img/noun-arrow-right-1434311.svg" %}" alt="">
          </div>
          {% if focus_area.value.url or focus_area.value.page %}
          </a>
          {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

  {% for block in page.modules %}
  <div class="border-b border-dark last:border-b-0">
    {% include_block block %}
  </div>
  {% endfor %}


<div class="max-w-screen-xl mt-16 px-14 pb-20">
  <div class="flex justify-between mb-6">
    <h2 class="mb-2 text-4xl font-semibold">Zadnje aktivnosti</h2>
    <form id="our-work-form" action="{% url 'our-work' %}" method="post" class="flex items-center">
      {% csrf_token %}

      <div class="me-2">
        <input type="checkbox" name="all" value="" class="peer hidden" id="id_all" checked>
        <label for="id_all" class="block px-2.5 pt-1 pb-1.5 border border-dark rounded-full text-sm leading-none cursor-pointer peer-checked:bg-mint">
          Vse
        </label>
      </div>

      <div class="me-2">
        <input type="checkbox" name="projects" value="1" class="peer hidden" id="id_projects_0" onchange="filterOurWork()">
        <label for="id_projects_0" class="block px-2.5 pt-1 pb-1.5 border border-dark rounded-full text-sm leading-none cursor-pointer">
          DJND projekti
        </label>
      </div>

      <a href="/nase-delo" class="hover:underline self-center">
        <span>Vsi filtri</span><img class="inline-block w-3 ml-1 -mt-1" src="{% static "img/noun-arrow-right-1434311.svg" %}" alt="">
      </a>

    </form>

  </div>
  <div class="grid grid-cols-3 gap-4">
    {% for activity in activities %}
    {% include 'home/partials/activity.html' with activity=activity %}
    {% if forloop.counter == 3 %}
    <div class="border border-dark px-5 py-10 bg-gradient-to-tl from-white to-mint">
      <img src="{% static 'img/newsletter.png' %}" alt="" class="w-[100px]">
      <h2 class="text-4xl font-semibold mb-4 mt-4">{% translate "Prijavi se na naš" %} <span class="italic">{% translate "Občasnik" %}!</span></h2>
      <p class="text-xl font-semibold">{% translate "Vsak mesec ti bomo dostavili svežo bero informativnih vsebin in zanimivih zapisov o temah, ki nas žulijo, razveseljujejo ali navdihujejo, pisali pa ti bomo tudi, ko naredimo kaj dobrega ali ko se bo dogajalo kaj zanimivega." %}</p>
      {% include 'home/partials/newsletter_form.html' with id=forloop.counter color='green' %}
    </div>
    {% endif %}
    {% if forloop.counter == 7 %}
    <div class="border border-dark px-5 py-10 bg-red-light flex flex-col justify-center">
      <h2 class="text-4xl font-semibold mb-6 mt-4">{% translate "Za nadaljnje neodvisno delovanje potrebujemo tudi" %} <span
          class="italic">{% translate "tvojo podporo" %}!</span></h2>
      <a href="{% url 'support' %}" class="flex justify-between w-full px-3 pt-2.5 pb-3 border-2 border-dark bg-red font-semibold text-2xl">
        <span>{% translate 'Podpri nas!' %}</span><img class="w-4 -mb-0.5" src="{% static 'img/noun-arrow-right-1434311.svg' %}" alt="">
      </a>
    </div>
    {% endif %}
    {% endfor %}
  </div>
</div>

</div>
{% endblock content %}
