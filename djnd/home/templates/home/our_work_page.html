{% extends "wrapper.html" %}
{% load i18n static wagtailcore_tags wagtailimages_tags %}
{% wagtail_site as current_site %}

{% block body_class %}template-homepage{% endblock %}

{% block content %}

<div class="px-14 py-16">
  <h1 class="mb-6 text-4xl font-semibold">{{ page.title }}</h1>
  
  <form id="our-work-form" action="{{ current_site }}" method="post" class="mb-8">
    {% csrf_token %}

    <div class="mb-4">
      <p class="font-mono">{% translate "Filtriraj po tematskih sklopih" %}</p>
      <div id="id_pillars" class="flex gap-2 mb-6">
        {% for choice_id, choice_label in form.pillars.field.choices %}
        <div>
          <input type="checkbox" name="pillars" value="{{ choice_id }}" class="peer hidden" id="id_pillars_{{ forloop.counter0 }}" onchange="filterOurWork()" {% if choice_id|slugify in form.pillars.value %}checked{% endif %}>
          <label for="id_pillars_{{ forloop.counter0 }}" class="block px-2.5 pt-1 pb-1.5 border border-dark rounded-full text-sm leading-none cursor-pointer peer-checked:bg-mint">
            {{ choice_label }}
          </label>
        </div>
        {% endfor %}
      </div>
    </div>
  
    <div class="mb-4">
      <p class="font-mono">{% translate "Filtriraj po kategorijah" %}</p>
      <div id="id_categories" class="flex gap-2 mb-6">        
        {% for choice_id, choice_label in form.categories.field.choices %}
        <div>
          <input type="checkbox" name="categories" value="{{ choice_id }}" class="peer hidden" id="id_categories_{{ forloop.counter0 }}" onchange="filterOurWork()" {% if choice_id|slugify in form.categories.value %}checked{% endif %}>
          <label for="id_categories_{{ forloop.counter0 }}" class="block px-2.5 pt-1 pb-1.5 border border-dark rounded-full text-sm leading-none cursor-pointer peer-checked:bg-mint">
            {{ choice_label }}
          </label>
        </div>
        {% endfor %}
      </div>
    </div>
  
    <div class="mb-4">
      <p class="font-mono">{% translate "Filtriraj po projektih" %}</p>
      <div id="id_projects" class="flex gap-2 mb-6">
        {% for choice_id, choice_label in form.projects.field.choices %}
        <div>
          <input type="checkbox" name="projects" value="{{ choice_id }}" class="peer hidden" id="id_projects_{{ forloop.counter0 }}" onchange="filterOurWork()" {% if choice_id|slugify in form.projects.value %}checked{% endif %}>
          <label for="id_projects_{{ forloop.counter0 }}" class="block px-2.5 pt-1 pb-1.5 border border-dark rounded-full text-sm leading-none cursor-pointer peer-checked:bg-mint">
            {{ choice_label }}
          </label>
        </div>
        {% endfor %}
      </div>
    </div>

  </form>

  <div class="grid grid-cols-3 gap-4">
    {% for activity in activities %}
    {% include 'home/partials/activity.html' with activity=activity.localized %}
    {% if forloop.counter == 3 %}
    <div class="border-2 border-dark px-5 py-10 bg-gradient-to-tl from-white to-mint">
      <img src="{% static 'img/newsletter.png' %}" alt="" class="w-[100px]">
      <h2 class="text-2xl leading-[2.25rem] font-semibold mb-4 mt-4">{% translate "Prijavi se na naš" %} <span class="italic">{% translate "Občasnik" %}!</span></h2>
      <p class="text-md font-semibold">{% translate "Vsak mesec ti bomo dostavili svežo bero informativnih vsebin in zanimivih zapisov o temah, ki nas žulijo, razveseljujejo ali navdihujejo, pisali pa ti bomo tudi, ko naredimo kaj dobrega ali ko se bo dogajalo kaj zanimivega." %}</p>
      {% include 'home/partials/newsletter_form.html' with id=forloop.counter color='green' %}
    </div>
    {% endif %}
    {% if forloop.counter == 7 %}
    <div class="border-2 border-dark px-5 py-10 bg-red-light flex flex-col justify-center">
      <h2 class="text-2xl leading-[2.25rem] font-semibold mb-6 mt-4">{% translate "Za nadaljnje neodvisno delovanje potrebujemo tudi" %} <span
          class="italic">{% translate "tvojo podporo" %}!</span></h2>
      {% if settings.home.GeneralSettings.support_page %}
      <a href="{% pageurl settings.home.GeneralSettings.support_page %}" class="flex justify-between w-full px-3 pt-2.5 pb-3 border border-dark bg-red font-semibold text-lg">
        <span>{% translate 'Podpri nas!' %}</span><img class="w-4 -mb-0.5" src="{% static 'img/noun-arrow-right-1434311.svg' %}" alt="">
      </a>
      {% endif %}
    </div>
    {% endif %}
    {% endfor %}
  </div>
</div>

{% endblock content %}