{% load static i18n wagtailcore_tags wagtailimages_tags djnd_extras %}

<div class="px-6 pt-8">
  {% wagtail_site as current_site %}
  <a href="{% pageurl current_site.root_page.localized %}" class="inline-block mb-5">
    <img src="{% static "img/djnd-logo-dark.svg" %}" alt="Danes je nov dan" class="h-9">
  </a>

  <div class="relative">
    <img src="{% static "img/noun-language-4113652.svg" %}" alt="" class="absolute left-2.5 w-4 h-[34px] pointer-events-none">
    <select id="lang-chooser" class="flex gap-2 w-full p-2 pl-8 border border-dark font-mono text-sm text-left" onchange="window.location.href = this.value">
      {% if page %}
      {% for language_code, language_name in LANGUAGES %}
        {% get_language_info for language_code as lang %}
        {% language language_code %}
          <option value="{% pageurl page.localized %}" data-lang="{{ language_code }}" {% if LANGUAGE_CODE == language_code %}selected{% endif %}>{{ lang.name_local }}</option>
        {% endlanguage %}
      {% endfor %}
      {% endif %}
    </select>
  </div>

  <hr class="my-10">

  <nav>
    <ul class="flex flex-col gap-3">
      {% for pillar_page in settings.home.NavigationSettings.pillars %}
      <li class="uppercase text-smd/5 font-medium">
        <div class="relative flex items-start gap-1">
          {% if pillar_page.value.localized.icon %}
            {% image pillar_page.value.localized.icon fill-48x48 class="w-6 mt-0.5" %}
          {% elif pillar_page.value.localized.image %}
            {% image pillar_page.value.localized.image fill-48x48 class="w-6 mt-0.5" %}
          {% endif %}
          <a
            href="{% pageurl pillar_page.value.localized %}"
            class="theme-color-{{ pillar_page.value.localized.specific.color }}"
            aria-current="{% if page.id == pillar_page.value.localized.id %}page{% else %}false{% endif %}"
          >{{ pillar_page.value.localized.title }}</a>
        </div>
      </li>
      {% endfor %}
    </ul>
  </nav>

  <hr class="my-10">

  <nav>
    <ul class="flex flex-col gap-3">
      {% for nav_page in settings.home.NavigationSettings.pages %}
      <li class="uppercase text-smd/5 font-medium">
        <div class="relative">
          <a
            href="{% pageurl nav_page.value.page.localized %}"
            class="theme-color-{{ nav_page.value.page.localized.specific.color }}"
            aria-current="{% if page.id == nav_page.value.page.localized.id %}page{% else %}false{% endif %}"
          >{{ nav_page.value.page.localized.title }}</a>
        </div>
        {% if nav_page.value.subpages %}
        <ul class="mt-1 ml-4 flex flex-col gap-1">
          {% for nav_subpage in nav_page.value.subpages %}
          <li class="normal-case text-base/5 font-normal">
            <div class="relative">
              <a
                href="{% pageurl nav_subpage.localized %}"
                class="theme-color-{{ nav_subpage.localized.specific.color }}"
                aria-current="{% if page.id == nav_subpage.localized.id %}page{% else %}false{% endif %}"
              >{{ nav_subpage.localized.title }}</a>
            </div>
          </li>
          {% endfor %}
        </ul>
        {% endif %}
      </li>
      {% endfor %}
      <!-- <li class="uppercase text-smd/5 font-medium">
        <a href="/trgovina" class="hover:underline">{% translate "Trgovina" %}</a>
      </li> -->
    </ul>
  </nav>
</div>
